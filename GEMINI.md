# Контекст для Gemini: BSL Type Safety Analyzer

Этот документ предоставляет краткий обзор проекта "BSL Type Safety Analyzer" для использования в качестве контекста в диалогах с Gemini.

## Обзор проекта

**BSL Type Safety Analyzer** — это продвинутый статический анализатор для языка 1C:Enterprise (BSL), написанный на Rust. Проект предназначен для работы с крупными корпоративными конфигурациями (более 80 000 объектов) и включает в себя:

*   **Единую систему типов:** Централизованный индекс всех сущностей BSL (платформенных типов, объектов конфигурации, форм и т.д.) для быстрых и точных запросов.
*   **Сервер LSP (Language Server Protocol):** Обеспечивает интеграцию с IDE, предоставляя такие функции, как диагностика в реальном времени, автодополнение и информация при наведении.
*   **Расширение для VSCode:** Полноценное, готовое к публикации расширение, включающее все необходимые инструменты.
*   **Унифицированная система сборки:** Набор скриптов (Node.js) и команд для автоматизации сборки, версионирования, тестирования и публикации проекта.
*   **Интерактивная консоль разработки:** Удобное меню для выполнения всех основных операций с проектом.

Ключевая архитектурная особенность — **Unified BSL Index**, который служит единым источником правды для всех типов в системе, обеспечивая высокую производительность и масштабируемость.

## Сборка и запуск

Проект использует гибридную систему сборки, сочетающую Rust (Cargo) и Node.js (npm).

### Основные команды

*   **Интерактивная консоль (рекомендуемый способ):**
    ```bash
    npm run interactive
    ```
    Эта команда запускает меню, из которого доступны все основные действия: сборка, тестирование, управление версиями, публикация и т.д.

*   **Умная сборка (быстрая, с кэшированием):**
    ```bash
    npm run dev 
    # или
    npm run build:smart
    ```
    Эта команда выполняет инкрементальную сборку, пересобирая только измененные компоненты. После первого запуска последующие сборки занимают всего несколько секунд.

*   **Режим наблюдения (Watch Mode):**
    ```bash
    npm run watch
    ```
    Автоматически отслеживает изменения в файлах `.rs` и `.ts` и запускает пересборку. Требует однократной установки зависимости `chokidar` (`npm run watch:install`).

*   **Полная пересборка для релиза:**
    ```bash
    npm run build:release
    ```
    Создает полностью оптимизированную релизную версию проекта, включая обновление версий во всех файлах и сборку VSCode расширения.

*   **Тестирование:**
    ```bash
    cargo test
    ```
    Запускает все тесты Rust.

### Профили сборки Rust

В `Cargo.toml` определены несколько профилей для оптимизации процесса разработки:
*   `dev`: Быстрая компиляция без оптимизации.
*   `dev-fast`: Компромисс между скоростью сборки и производительностью. Используется в большинстве `npm` скриптов.
*   `release`: Максимальная оптимизация для финальных сборок.

## Соглашения по разработке

*   **Управление версиями:** Версия проекта синхронизируется между `Cargo.toml`, `package.json` и другими файлами с помощью скриптов. Для обновления версии используются команды `npm run version:patch`, `npm run version:minor`, `npm run version:major`.
*   **Качество кода:** Перед коммитом рекомендуется форматировать код (`cargo fmt`) и проверять его с помощью `cargo clippy`.
*   **Git Workflow:** Для коммитов и релизов используются скрипты `git-workflow.js`, доступные через `npm run git:commit` и `npm run git:release`. Это обеспечивает стандартизированные сообщения коммитов.
*   **Бинарные файлы:** Исполняемые файлы, скомпилированные из Rust, копируются в директорию `vscode-extension/bin` для включения в состав расширения. Скрипт `copy-essential-binaries.js` управляет этим процессом.
*   **Документация:** Обширная документация находится в директории `docs/` и разделена по темам (архитектура, компоненты, руководства и т.д.).
