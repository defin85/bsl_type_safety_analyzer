# BSL Type Safety Analyzer - Development Roadmap

**–í–µ—Ä—Å–∏—è:** v1.0.0  
**–°—Ç–∞—Ç—É—Å:** üéØ **Unified Concept - Dual-Layer Architecture**  
**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2025-08-01

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```mermaid
graph TB
    subgraph "Core System (Heavy)"
        UI[UnifiedBslIndex<br/>24,055+ —Ç–∏–ø–æ–≤]
        MCP[MCP Server]
        CE[Cache Export]
        KB[Knowledge Base]
        
        UI --> MCP
        UI --> CE
        KB --> MCP
    end
    
    subgraph "Shell Tools (Light)"
        CLI[CLI Validator<br/><50ms startup]
        LSP[LSP Server<br/>minimal]
        CAC[Core API Client]
        
        CLI --> CAC
        LSP --> CAC
    end
    
    subgraph "LLM Integration"
        Claude[Claude/GPT]
        Direct[Direct Cache Access]
        
        Claude --> MCP
        Claude --> Direct
    end
    
    CAC --> MCP
    CE --> Direct
```

## üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

### ‚úÖ Core System - –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ | –ú–µ—Ç—Ä–∏–∫–∏ |
|-----------|----------|---------|
| **UnifiedBslIndex** | –ï–¥–∏–Ω—ã–π –∏–Ω–¥–µ–∫—Å –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ | 24,055+ —Ç–∏–ø–æ–≤, O(1) –ø–æ–∏—Å–∫ |
| **Platform Cache** | –í–µ—Ä—Å–∏–æ–Ω–Ω–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã | 4,916 —Ç–∏–ø–æ–≤, 588ms –∑–∞–≥—Ä—É–∑–∫–∞ |
| **Configuration Parser** | –ü—Ä—è–º–æ–π –ø–∞—Ä—Å–∏–Ω–≥ XML –æ–±—ä–µ–∫—Ç–æ–≤ | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤ |
| **Type System** | –ì—Ä–∞—Ñ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ | 100% –ø–æ–∫—Ä—ã—Ç–∏–µ |

### ‚úÖ Core System - –ù–µ–¥–∞–≤–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ | –î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è |
|-----------|----------|-----------------|
| **Form Integration** | ConfigurationXmlParser —Ä–∞—Å—à–∏—Ä–µ–Ω –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ —Ñ–æ—Ä–º –∫–∞–∫ BslEntity | 2025-08-01 |
| **UnifiedBslIndex** | –¢–µ–ø–µ—Ä—å –≤–∫–ª—é—á–∞–µ—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ–æ—Ä–º–∞—Ö (–∫–æ–º–∞–Ω–¥—ã, —ç–ª–µ–º–µ–Ω—Ç—ã) | 2025-08-01 |

### üöß –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°–ª–æ–π | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –°—Ä–æ–∫ |
|-----------|------|--------|-----------|------|
| **MCP Server** | Core | üìù –î–∏–∑–∞–π–Ω –≥–æ—Ç–æ–≤ (5%) | üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π | 2 –Ω–µ–¥–µ–ª–∏ |
| **Cache Export** | Core | üÜï –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è | üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π | 1 –Ω–µ–¥–µ–ª—è |
| **BSL Parser** | Shell | ‚ùå –ë–ª–æ–∫–µ—Ä (10%) | üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π | 2 –Ω–µ–¥–µ–ª–∏ |
| **CLI Validator** | Shell | üÜï –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è | üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π | 1 –Ω–µ–¥–µ–ª—è |
| **Core API** | Shell | üÜï –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è | üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π | 1 –Ω–µ–¥–µ–ª—è |
| **Knowledge Base** | Core | üÜï –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è | üü° –°—Ä–µ–¥–Ω–∏–π | 3 –Ω–µ–¥–µ–ª–∏ |
| **LSP Server** | Shell | üöß –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (20%) | üü° –°—Ä–µ–¥–Ω–∏–π | 2 –Ω–µ–¥–µ–ª–∏ |

## üéØ –¶–µ–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞

### –ü–µ—Ä–≤–∏—á–Ω–∞—è —Ü–µ–ª—å (LLM Support)
–û–±–µ—Å–ø–µ—á–∏—Ç—å LLM –ø–æ–ª–Ω—ã–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –∫–æ–¥–∞ 1–° –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞

### –í—Ç–æ—Ä–∏—á–Ω–∞—è —Ü–µ–ª—å (Developer Tools)
–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –±—ã—Å—Ç—Ä—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º footprint

## üìà –ü–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è

### –§–∞–∑–∞ 1: Core Foundation (8 –Ω–µ–¥–µ–ª—å)

```
–ù–µ–¥–µ–ª–∏ 1-2:  MCP Server
            ‚îî‚îÄ Rust + tokio —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
            ‚îî‚îÄ 4 –±–∞–∑–æ–≤—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
            ‚îî‚îÄ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å UnifiedBslIndex

–ù–µ–¥–µ–ª—è 3:    Form Integration (–ù–û–í–û–ï!)
            ‚îî‚îÄ ‚úÖ –ê–¥–∞–ø—Ç–µ—Ä FormContract ‚Üí BslEntity
            ‚îî‚îÄ ‚úÖ –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–æ—Ä–º–∞—Ö –≤ –∏–Ω–¥–µ–∫—Å–µ  
            ‚îî‚îÄ ‚úÖ –¢–µ—Å—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
            
–ù–µ–¥–µ–ª—è 4:    Cache Export Engine  
            ‚îî‚îÄ SQLite —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏
            ‚îî‚îÄ MessagePack –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
            ‚îî‚îÄ JSON —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π

–ù–µ–¥–µ–ª–∏ 5-6:  Knowledge Base
            ‚îî‚îÄ –°–±–æ—Ä –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
            ‚îî‚îÄ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
            ‚îî‚îÄ –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–ù–µ–¥–µ–ª–∏ 7-8:  Docker & Deployment
            ‚îî‚îÄ Docker compose
            ‚îî‚îÄ Systemd —Å–µ—Ä–≤–∏—Å
            ‚îî‚îÄ CI/CD pipeline
```

### –§–∞–∑–∞ 2: Shell Development (4 –Ω–µ–¥–µ–ª–∏)

```
–ù–µ–¥–µ–ª–∏ 1-2:  BSL Grammar (tree-sitter)
            ‚îî‚îÄ –ü–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏
            ‚îî‚îÄ –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥
            ‚îî‚îÄ Error recovery

–ù–µ–¥–µ–ª—è 3:    CLI Validator + Core API
            ‚îî‚îÄ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–µ—Ä
            ‚îî‚îÄ HTTP/IPC –∫–ª–∏–µ–Ω—Ç
            ‚îî‚îÄ Offline –∫–µ—à

–ù–µ–¥–µ–ª—è 4:    LSP Integration
            ‚îî‚îÄ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Core
            ‚îî‚îÄ –ë–∞–∑–æ–≤–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
```

### –§–∞–∑–∞ 3: Integration & Polish (2 –Ω–µ–¥–µ–ª–∏)

```
–ù–µ–¥–µ–ª—è 1:    Packaging & Distribution
            ‚îî‚îÄ Core installer
            ‚îî‚îÄ Shell –≤ cargo/npm
            ‚îî‚îÄ Brew/apt –ø–∞–∫–µ—Ç—ã

–ù–µ–¥–µ–ª—è 2:    Testing & Documentation
            ‚îî‚îÄ E2E —Ç–µ—Å—Ç—ã
            ‚îî‚îÄ Performance benchmarks
            ‚îî‚îÄ –í–∏–¥–µ–æ —Ç—É—Ç–æ—Ä–∏–∞–ª—ã
```

## üìä –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

### Core System (LLM-focused)
- ‚úÖ **–ü–æ–ª–Ω–æ—Ç–∞:** 100% —Ç–∏–ø–æ–≤ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- üéØ **Latency:** < 10ms –Ω–∞ MCP –∑–∞–ø—Ä–æ—Å
- üéØ **Export:** < 5 —Å–µ–∫ –¥–ª—è –≤—Å–µ—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
- üéØ **Uptime:** 99.9%

### Shell Tools (Developer-focused)
- üéØ **Startup:** < 50ms —Ö–æ–ª–æ–¥–Ω—ã–π —Å—Ç–∞—Ä—Ç
- üéØ **Memory:** < 10MB idle, < 50MB active
- üéØ **Validation:** < 100ms –Ω–∞ —Ñ–∞–π–ª
- üéØ **Offline:** > 80% —Ç–æ—á–Ω–æ—Å—Ç—å

### –û–±—â–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
- üéØ **LLM accuracy:** > 90% –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- üéØ **Developer satisfaction:** > 4.5/5
- üéØ **Community:** 100+ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –ø–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –î–ª—è LLM (Core)
```bash
# –ó–∞–ø—É—Å–∫ Core —Å–µ—Ä–≤–µ—Ä–∞
bsl-analyzer server --port 7777

# –≠–∫—Å–ø–æ—Ä—Ç –∫–µ—à–∞ –¥–ª—è –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
bsl-analyzer export-cache --format sqlite --output cache.db

# MCP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
export MCP_SERVER_BSL="http://localhost:7777"
```

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ (Shell)
```bash
# –ë—ã—Å—Ç—Ä–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
bsl-analyzer check Module.bsl

# –° –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ Core
bsl-analyzer check Module.bsl --core http://localhost:7777

# Offline —Ä–µ–∂–∏–º
bsl-analyzer check Module.bsl --offline
```

## üîß –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Core System
- **–Ø–∑—ã–∫:** Rust (–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å + –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
- **Async:** tokio (–¥–ª—è MCP —Å–µ—Ä–≤–µ—Ä–∞)
- **Storage:** SQLite + MessagePack
- **Protocol:** MCP (Model Context Protocol)

### Shell Tools  
- **Parser:** tree-sitter (–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ—Å—Ç—å)
- **CLI:** clap + colored output
- **Client:** reqwest/hyper
- **Cache:** sled/rocksdb

## üìã –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

#### FormXmlParser vs ConfigurationXmlParser ‚úÖ –†–ï–®–ï–ù–û
**–†–µ—à–µ–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (2025-08-01):**
- ConfigurationXmlParser —Ä–∞—Å—à–∏—Ä–µ–Ω –º–µ—Ç–æ–¥–æ–º `parse_form_xml()`
- –§–æ—Ä–º—ã –ø–∞—Ä—Å—è—Ç—Å—è –∫–∞–∫ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ BslEntity
- –ö–æ–º–∞–Ω–¥—ã —Ñ–æ—Ä–º—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –º–µ—Ç–æ–¥–∞–º–∏ –≤ interface.methods
- –≠–ª–µ–º–µ–Ω—Ç—ã —Ñ–æ—Ä–º—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ extended_data
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–±–µ–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä: Forms/Name/Form.xml –∏ Forms/Name/Ext/Form.xml

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –§–æ—Ä–º—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ UnifiedBslIndex
- ‚úÖ –ï–¥–∏–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —á–µ—Ä–µ–∑ BslEntity
- ‚úÖ FormXmlParser –æ—Å—Ç–∞–µ—Ç—Å—è –¥–ª—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ UI –∞–Ω–∞–ª–∏–∑–∞ –≤ Shell

### üü° –ù–µ–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

#### Legacy –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **MetadataReportParser** - –æ—Å—Ç–∞–≤–∏—Ç—å –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å —Ç–µ–∫—Å—Ç–æ–≤—ã–º–∏ –æ—Ç—á–µ—Ç–∞–º–∏
- **HybridStorage** - –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ UnifiedBslIndex, –Ω–æ –∫–æ–¥ –æ—Å—Ç–∞–µ—Ç—Å—è –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏

## üéâ –ò—Ç–æ–≥–æ–≤–æ–µ –≤–∏–¥–µ–Ω–∏–µ

**BSL Type Safety Analyzer v1.0** - —ç—Ç–æ –¥–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞, –≥–¥–µ:
- **Core** –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç LLM –ø–æ–ª–Ω—ã–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- **Shell** –¥–∞–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –±—ã—Å—Ç—Ä—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –ª—É—á—à–µ–µ –∏–∑ –¥–≤—É—Ö –º–∏—Ä–æ–≤ –±–µ–∑ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å–æ–≤.

---

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ù–∞—á–∞—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é MCP Server (–§–∞–∑–∞ 1, –Ω–µ–¥–µ–ª–∏ 1-2)