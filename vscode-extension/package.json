{
    "name": "bsl-type-safety-analyzer",
    "displayName": "BSL Analyzer",
    "description": "Advanced BSL (1C:Enterprise) static analyzer with type safety checking - Self-contained with bundled binaries",
    "version": "1.9.0",
    "publisher": "bsl-analyzer-team",
    "icon": "images/bsl-analyzer-logo.png",
    "engines": {
        "vscode": "^1.75.0"
    },
    "categories": [
        "Programming Languages",
        "Linters",
        "Other"
    ],
    "activationEvents": [
        "onStartupFinished",
        "onLanguage:bsl",
        "workspaceContains:**/*.bsl"
    ],
    "galleryBanner": {
        "color": "#CE422B",
        "theme": "dark"
    },
    "keywords": [
        "bsl",
        "1c",
        "enterprise",
        "static-analysis",
        "type-safety"
    ],
    "main": "./out/extension.js",
    "contributes": {
        "languages": [
            {
                "id": "bsl",
                "aliases": [
                    "BSL",
                    "1C:Enterprise"
                ],
                "extensions": [
                    ".bsl",
                    ".os"
                ],
                "configuration": "./language-configuration.json"
            }
        ],
        "grammars": [
            {
                "language": "bsl",
                "scopeName": "source.bsl",
                "path": "./syntaxes/bsl.tmGrammar.json"
            }
        ],
        "configuration": {
            "type": "object",
            "title": "BSL Analyzer",
            "properties": {
                "bslAnalyzer.enabled": {
                    "type": "boolean",
                    "default": true,
                    "description": "Enable BSL Analyzer"
                },
                "bslAnalyzer.serverPath": {
                    "type": "string",
                    "default": "lsp_server.exe",
                    "description": "Path to BSL Analyzer LSP server executable"
                },
                "bslAnalyzer.serverMode": {
                    "type": "string",
                    "enum": [
                        "stdio",
                        "tcp"
                    ],
                    "default": "stdio",
                    "description": "LSP server communication mode"
                },
                "bslAnalyzer.tcpPort": {
                    "type": "number",
                    "default": 8080,
                    "description": "TCP port for LSP server (when using TCP mode)"
                },
                "bslAnalyzer.useBundledBinaries": {
                    "type": "boolean",
                    "default": true,
                    "description": "Use bundled binaries from extension. If false, uses binaries from indexServerPath or workspace."
                },
                "bslAnalyzer.indexServerPath": {
                    "type": "string",
                    "default": "",
                    "description": "Path to directory containing BSL Analyzer binaries (build_unified_index.exe, query_type.exe, etc.). Only used if useBundledBinaries is false."
                },
                "bslAnalyzer.configurationPath": {
                    "type": "string",
                    "default": "",
                    "description": "Path to 1C configuration directory for index building"
                },
                "bslAnalyzer.platformVersion": {
                    "type": "string",
                    "default": "8.3.25",
                    "description": "1C platform version for index building"
                },
                "bslAnalyzer.platformDocsArchive": {
                    "type": "string",
                    "default": "",
                    "description": "Path to 1C platform documentation archive. Supports both formats: rebuilt.shcntx_ru.zip (context help with objects/methods) or rebuilt.shlang_ru.zip (language help with primitives/directives). For best results, use shcntx format."
                },
                "bslAnalyzer.autoIndexBuild": {
                    "type": "boolean",
                    "default": false,
                    "description": "Automatically build index when opening BSL files"
                },
                "bslAnalyzer.rulesConfig": {
                    "type": "string",
                    "default": "",
                    "description": "Path to rules configuration file"
                },
                "bslAnalyzer.enableMetrics": {
                    "type": "boolean",
                    "default": true,
                    "description": "Enable code quality metrics"
                },
                "bslAnalyzer.enableRealTimeAnalysis": {
                    "type": "boolean",
                    "default": true,
                    "description": "Enable real-time analysis as you type"
                },
                "bslAnalyzer.maxFileSize": {
                    "type": "number",
                    "default": 1048576,
                    "description": "Maximum file size for analysis (bytes)"
                },
                "bslAnalyzer.trace.server": {
                    "type": "string",
                    "enum": [
                        "off",
                        "messages",
                        "verbose"
                    ],
                    "default": "off",
                    "description": "Trace communication between VS Code and LSP server"
                }
            }
        },
        "commands": [
            {
                "command": "bslAnalyzer.analyzeFile",
                "title": "Analyze Current File",
                "category": "BSL Analyzer"
            },
            {
                "command": "bslAnalyzer.analyzeWorkspace",
                "title": "Analyze Workspace",
                "category": "BSL Analyzer"
            },
            {
                "command": "bslAnalyzer.generateReports",
                "title": "Generate Reports",
                "category": "BSL Analyzer"
            },
            {
                "command": "bslAnalyzer.showMetrics",
                "title": "Show Code Quality Metrics",
                "category": "BSL Analyzer"
            },
            {
                "command": "bslAnalyzer.configureRules",
                "title": "Configure Rules",
                "category": "BSL Analyzer"
            },
            {
                "command": "bslAnalyzer.restartServer",
                "title": "Restart LSP Server",
                "category": "BSL Analyzer"
            },
            {
                "command": "bslAnalyzer.searchType",
                "title": "Search BSL Type",
                "category": "BSL Index",
                "icon": "$(search)"
            },
            {
                "command": "bslAnalyzer.searchMethod",
                "title": "Search Method in Type",
                "category": "BSL Index",
                "icon": "$(symbol-method)"
            },
            {
                "command": "bslAnalyzer.buildIndex",
                "title": "Build Unified BSL Index",
                "category": "BSL Index",
                "icon": "$(database)"
            },
            {
                "command": "bslAnalyzer.showIndexStats",
                "title": "Show Index Statistics",
                "category": "BSL Index",
                "icon": "$(graph)"
            },
            {
                "command": "bslAnalyzer.incrementalUpdate",
                "title": "Incremental Index Update",
                "category": "BSL Index",
                "icon": "$(sync)"
            },
            {
                "command": "bslAnalyzer.exploreType",
                "title": "Explore Type Methods & Properties",
                "category": "BSL Index",
                "icon": "$(type-hierarchy)"
            },
            {
                "command": "bslAnalyzer.validateMethodCall",
                "title": "Validate Method Call",
                "category": "BSL Verification",
                "icon": "$(check)"
            },
            {
                "command": "bslAnalyzer.checkTypeCompatibility",
                "title": "Check Type Compatibility",
                "category": "BSL Verification",
                "icon": "$(arrow-both)"
            },
            {
                "command": "bslAnalyzer.refreshOverview",
                "title": "Refresh",
                "icon": "$(refresh)"
            },
            {
                "command": "bslAnalyzer.refreshDiagnostics",
                "title": "Refresh",
                "icon": "$(refresh)"
            },
            {
                "command": "bslAnalyzer.refreshTypeIndex",
                "title": "Refresh",
                "icon": "$(refresh)"
            },
            {
                "command": "bslAnalyzer.addPlatformDocs",
                "title": "Add Platform Documentation",
                "icon": "$(add)"
            },
            {
                "command": "bslAnalyzer.removePlatformDocs",
                "title": "Remove Platform Documentation",
                "icon": "$(trash)"
            },
            {
                "command": "bslAnalyzer.refreshPlatformDocs",
                "title": "Refresh",
                "icon": "$(refresh)"
            },
            {
                "command": "bslAnalyzer.parsePlatformDocs",
                "title": "Parse Platform Documentation",
                "icon": "$(play)"
            },
            {
                "command": "bslAnalyzer.testProgress",
                "title": "Test Progress System",
                "category": "BSL Debug",
                "icon": "$(beaker)"
            }
        ],
        "viewsContainers": {
            "activitybar": [
                {
                    "id": "bslAnalyzer",
                    "title": "BSL Analyzer",
                    "icon": "$(bracket)"
                }
            ]
        },
        "views": {
            "bslAnalyzer": [
                {
                    "id": "bslAnalyzer.overview",
                    "name": "Overview",
                    "type": "tree"
                },
                {
                    "id": "bslAnalyzer.diagnostics",
                    "name": "Diagnostics",
                    "type": "tree"
                },
                {
                    "id": "bslAnalyzer.typeIndex",
                    "name": "Type Index",
                    "type": "tree"
                },
                {
                    "id": "bslAnalyzer.actions",
                    "name": "Quick Actions",
                    "type": "webview"
                },
                {
                    "id": "bslAnalyzer.platformDocs",
                    "name": "Platform Documentation",
                    "type": "tree"
                }
            ]
        },
        "menus": {
            "explorer/context": [
                {
                    "when": "resourceExtname == .bsl",
                    "command": "bslAnalyzer.analyzeFile",
                    "group": "BSL Analyzer"
                }
            ],
            "editor/context": [
                {
                    "when": "resourceExtname == .bsl",
                    "command": "bslAnalyzer.analyzeFile",
                    "group": "BSL Analyzer@1"
                },
                {
                    "when": "resourceExtname == .bsl",
                    "command": "bslAnalyzer.showMetrics",
                    "group": "BSL Analyzer@2"
                },
                {
                    "when": "resourceExtname == .bsl && editorHasSelection",
                    "command": "bslAnalyzer.validateMethodCall",
                    "group": "BSL Index@1"
                },
                {
                    "when": "resourceExtname == .bsl && editorHasSelection",
                    "command": "bslAnalyzer.exploreType",
                    "group": "BSL Index@2"
                }
            ],
            "commandPalette": [
                {
                    "command": "bslAnalyzer.analyzeFile",
                    "when": "resourceExtname == .bsl"
                },
                {
                    "command": "bslAnalyzer.analyzeWorkspace"
                },
                {
                    "command": "bslAnalyzer.generateReports"
                },
                {
                    "command": "bslAnalyzer.showMetrics",
                    "when": "resourceExtname == .bsl"
                },
                {
                    "command": "bslAnalyzer.configureRules"
                },
                {
                    "command": "bslAnalyzer.restartServer"
                },
                {
                    "command": "bslAnalyzer.searchType"
                },
                {
                    "command": "bslAnalyzer.searchMethod"
                },
                {
                    "command": "bslAnalyzer.buildIndex"
                },
                {
                    "command": "bslAnalyzer.showIndexStats"
                },
                {
                    "command": "bslAnalyzer.incrementalUpdate"
                },
                {
                    "command": "bslAnalyzer.exploreType"
                },
                {
                    "command": "bslAnalyzer.validateMethodCall",
                    "when": "resourceExtname == .bsl && editorHasSelection"
                },
                {
                    "command": "bslAnalyzer.checkTypeCompatibility"
                },
                {
                    "command": "bslAnalyzer.addPlatformDocs"
                },
                {
                    "command": "bslAnalyzer.parsePlatformDocs"
                },
                {
                    "command": "bslAnalyzer.removePlatformDocs"
                },
                {
                    "command": "bslAnalyzer.testProgress"
                }
            ],
            "view/title": [
                {
                    "command": "bslAnalyzer.refreshOverview",
                    "when": "view == bslAnalyzer.overview",
                    "group": "navigation"
                },
                {
                    "command": "bslAnalyzer.refreshDiagnostics",
                    "when": "view == bslAnalyzer.diagnostics",
                    "group": "navigation"
                },
                {
                    "command": "bslAnalyzer.refreshTypeIndex",
                    "when": "view == bslAnalyzer.typeIndex",
                    "group": "navigation"
                },
                {
                    "command": "bslAnalyzer.addPlatformDocs",
                    "when": "view == bslAnalyzer.platformDocs",
                    "group": "navigation@1"
                },
                {
                    "command": "bslAnalyzer.refreshPlatformDocs",
                    "when": "view == bslAnalyzer.platformDocs",
                    "group": "navigation@2"
                }
            ],
            "view/item/context": [
                {
                    "command": "bslAnalyzer.parsePlatformDocs",
                    "when": "view == bslAnalyzer.platformDocs && viewItem == version",
                    "group": "platform@1"
                },
                {
                    "command": "bslAnalyzer.removePlatformDocs", 
                    "when": "view == bslAnalyzer.platformDocs && viewItem == version",
                    "group": "platform@2"
                }
            ]
        },
        "snippets": [
            {
                "language": "bsl",
                "path": "./snippets/bsl.json"
            }
        ]
    },
    "files": [
        "out/**/*",
        "bin/**/*",
        "syntaxes/**/*",
        "snippets/**/*",
        "images/**/*",
        "language-configuration.json",
        "LICENSE",
        "README.md"
    ],
    "scripts": {
        "vscode:prepublish": "npm run compile",
        "compile": "tsc -p ./",
        "watch": "tsc -watch -p ./"
    },
    "devDependencies": {
        "@types/node": "16.x",
        "@types/vscode": "^1.74.0",
        "typescript": "^4.9.5"
    },
    "dependencies": {
        "vscode-languageclient": "^8.1.0"
    },
    "repository": {
        "type": "git",
        "url": "https://github.com/defin85/bsl_type_safety_analyzer.git"
    },
    "bugs": {
        "url": "https://github.com/defin85/bsl_type_safety_analyzer/issues"
    },
    "homepage": "https://github.com/defin85/bsl_type_safety_analyzer#readme",
    "license": "MIT"
}
