# 📁 Структура проекта BSL Type Safety Analyzer

Статический анализатор типобезопасности для языка 1С BSL, написанный на Rust.

```
bsl_type_safety_analyzer/
├── Cargo.toml                     # Конфигурация Rust проекта
├── Cargo.lock                     # Заблокированные версии зависимостей
├── README.md                      # Основная документация
├── LICENSE                        # Лицензия MIT
│
├── src/                           # Исходный код Rust
│   ├── lib.rs                     # Корневой модуль библиотеки
│   ├── main.rs                    # CLI приложение
│   ├── lsp_main.rs               # LSP сервер
│   │
│   ├── analyzer/                  # Анализаторы кода
│   │   ├── mod.rs                # Экспорты и общие типы
│   │   ├── engine.rs             # Основной движок анализа
│   │   ├── lexical_analyzer.rs   # Лексический анализ
│   │   ├── syntax_analyzer.rs    # Синтаксический анализ
│   │   ├── semantic.rs           # Семантический анализ
│   │   ├── data_flow_analyzer.rs # Анализ потоков данных
│   │   └── validation_manager.rs # Валидация входных данных
│   │
│   ├── parser/                    # Парсер BSL кода
│   │   ├── mod.rs                # Экспорты парсера
│   │   ├── lexer.rs              # Лексический анализатор
│   │   ├── ast.rs                # AST узлы и типы
│   │   └── syntax_analyzer.rs    # Построение AST
│   │
│   ├── verifiers/                 # Верификаторы
│   │   ├── mod.rs                # Экспорты верификаторов
│   │   └── method_verifier.rs    # Верификация методов
│   │
│   ├── diagnostics/               # Система диагностики
│   │   └── mod.rs                # Диагностические сообщения
│   │
│   ├── configuration/             # Конфигурация проекта
│   │   └── mod.rs                # Загрузка и парсинг конфигурации
│   │
│   ├── core/                      # Ядро системы
│   │   └── errors.rs             # Типы ошибок
│   │
│   └── lsp/                       # Language Server Protocol
│       ├── mod.rs                # LSP экспорты
│       ├── server.rs             # LSP сервер
│       ├── handlers.rs           # Обработчики LSP
│       └── completion.rs         # Автодополнение
│
├── docs/                          # Документация
│   └── architecture.md           # Архитектурное описание
│
├── docs_search/                   # BSL документация для анализа
│   ├── objects/                  # Описания BSL объектов
│   └── methods/                  # Описания методов
│
├── examples/                      # Примеры использования
│   ├── basic_usage.py            # Базовое использование (legacy)
│   └── project_analysis.py       # Анализ проекта (legacy)
│
└── target/                        # Артефакты сборки Rust
    ├── debug/                    # Debug сборка
    └── release/                  # Release сборка
```

## 🎯 Основные компоненты

### 🔍 **Анализаторы**
- **LexicalAnalyzer** - токенизация BSL кода (27 тестов)
- **SyntaxAnalyzer** - построение AST (20 тестов)
- **SemanticAnalyzer** - семантический анализ с 18+ BSL объектами (25 тестов)
- **DataFlowAnalyzer** - анализ потоков данных (14 тестов)

### ⚙️ **Движок**
- **AnalysisEngine** - координация всех фаз анализа (4 теста)
- **ValidationManager** - валидация входных данных
- **MethodVerifier** - верификация вызовов методов

### 🖥️ **Интерфейсы**
- **CLI** - интерфейс командной строки с командами analyze/lsp/info/validate
- **LSP Server** - сервер языкового протокола для IDE интеграции

### 📋 **Поддерживаемые BSL объекты**
- ТаблицаЗначений, Запрос, Выборка, РезультатЗапроса
- HTTPСоединение, HTTPЗапрос, HTTPОтвет
- ЧтениеXML, ЗаписьXML, ПостроительЗапроса
- СписокЗначений, СоответствиеЗначений
- Файл, ТекстовыйДокумент и еще 10+ объектов

## 🚀 Сборка и запуск

```bash
# Сборка проекта
cargo build --release

# Запуск тестов
cargo test

# Анализ BSL файла
./target/release/bsl-analyzer analyze file.bsl

# Запуск LSP сервера
./target/release/bsl-lsp
```

## 📊 Статистика

- **106/110 тестов проходят** (96.4% успешных)
- **5 minor warnings** (только LSP заглушки)
- **0 Python зависимостей** - проект полностью на Rust
- **Поддержка 18+ BSL объектов** с интеллектуальными предложениями

---

*Последнее обновление: 25 июля 2025 г.*