# Workflow Explorer для 1С:Предприятие

**Инструмент исследования и визуализации бизнес-процессов в конфигурациях 1С**

## Обзор

Workflow Explorer - это расширение BSL Type Safety Analyzer, предназначенное для исследования и визуализации бизнес-логики в проектах 1С:Предприятие. Инструмент помогает понять структуру системы, найти связи между объектами и визуализировать основные пути выполнения.

⚠️ **Важно**: Workflow Explorer НЕ претендует на полный анализ всех возможных путей выполнения. Из-за динамической природы 1С (Выполнить(), внешние обработки, зависимости от данных) инструмент показывает только явные и вероятные связи, помечая области неопределённости.

## Цели и задачи

### Основные цели
1. **Для разработчиков** - быстро понять структуру незнакомой конфигурации
2. **Для LLM (AI-ассистентов)** - предоставить контекст о связях между объектами
3. **Для аналитиков** - визуализировать основные бизнес-процессы

### Что показывает Explorer
✅ **Уверенно находит:**
- Явные вызовы процедур и функций
- Подписки на события (EventSubscriptions)
- Регламентные задания (ScheduledJobs)
- Цепочки документов (на основании)
- Маршруты бизнес-процессов

⚠️ **Частично определяет:**
- Условные вызовы (все ветки без вероятностей)
- Обращения к регистрам
- Обработчики форм

❌ **НЕ может определить:**
- Динамические вызовы через Выполнить()
- Внешние обработки
- Зависимости через данные
- COM/HTTP взаимодействия

## Компоненты системы

### 1. Core Components (для LLM)
- `WorkflowKnowledgeBase` - база знаний о типовых процессах
- `PatternRecognizer` - распознавание паттернов workflow
- `ProcessTemplates` - шаблоны бизнес-процессов

### 2. Shell Tools (для разработчиков)
- `WorkflowExtractor` - извлечение workflow из кода
- `GraphBuilder` - построение графов
- `Visualizer` - генерация диаграмм

## Документация

- [Концепция и ограничения](./concept.md)
- [Модель данных workflow](./data-model.md)
- [Интеграция с метаданными](./metadata-integration.md)
- [План реализации](./implementation-plan.md)
- [Примеры использования](./examples.md)

## Быстрый старт

```bash
# Исследование workflow в конфигурации
cargo run --bin workflow_explorer -- --config "path/to/config" --output-format mermaid

# Построение графа вызовов с уровнями уверенности
cargo run --bin workflow_explorer -- --mode call-graph --module "Документы.РеализацияТоваров" --show-confidence

# Исследование документооборота
cargo run --bin workflow_explorer -- --mode document-flow --document "ЗаказПокупателя" --depth 3

# Поиск неопределённых областей
cargo run --bin workflow_explorer -- --mode find-unknowns --config "path/to/config"
```

## Интеграция с основным проектом

Workflow Explorer использует существующую инфраструктуру BSL Type Safety Analyzer:
- `UnifiedBslIndex` для получения метаданных
- `ConfigurationXmlParser` для парсинга метаданных
- `BslParser` для анализа кода
- Расширенный парсинг EventSubscriptions и ScheduledJobs

## Roadmap

- [ ] Фаза 1: Извлечение явных вызовов (2 недели)
- [ ] Фаза 2: Парсинг подписок и регламентных заданий (1 неделя)
- [ ] Фаза 3: Построение цепочек документов (2 недели)
- [ ] Фаза 4: Визуализация с уровнями уверенности (2 недели)
- [ ] Фаза 5: Обозначение неопределённых областей (1 неделя)
- [ ] Фаза 6: Интеграция с MCP для контекста (1 неделя)