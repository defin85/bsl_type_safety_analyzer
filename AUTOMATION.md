# ü§ñ BSL Analyzer - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –†—É—á–Ω–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞
```bash
# –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ —Å —É–ø–∞–∫–æ–≤–∫–æ–π
npm run rebuild:extension

# –ë—ã—Å—Ç—Ä–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –±–µ–∑ —É–ø–∞–∫–æ–≤–∫–∏ (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
npm run rebuild:quick
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞
–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Husky —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç—Å—è** –ø—Ä–∏ –∫–æ–º–º–∏—Ç–∞—Ö, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤:
- `src/**/*.rs` - –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ Rust
- `Cargo.toml`, `Cargo.lock` - –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Rust
- `vscode-extension/src/**/*.ts` - –∫–æ–¥ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è TypeScript
- `vscode-extension/package.json` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

## üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è |
|---------|-----------|------------------|
| `npm run rebuild:extension` | üîÑ –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ + —É–ø–∞–∫–æ–≤–∫–∞ .vsix | ~3-5 –º–∏–Ω—É—Ç |
| `npm run rebuild:quick` | ‚ö° –ë—ã—Å—Ç—Ä–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –±–µ–∑ —É–ø–∞–∫–æ–≤–∫–∏ | ~2-3 –º–∏–Ω—É—Ç—ã |
| `npm run build:rust` | ü¶Ä –¢–æ–ª—å–∫–æ —Å–±–æ—Ä–∫–∞ Rust –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤ | ~2-3 –º–∏–Ω—É—Ç—ã |
| `npm run build:extension` | üìù –¢–æ–ª—å–∫–æ –∫–æ–º–ø–∏–ª—è—Ü–∏—è TypeScript | ~10-20 —Å–µ–∫—É–Ω–¥ |
| `npm run copy:binaries` | üìÅ –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤ –≤ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ | ~1 —Å–µ–∫—É–Ω–¥–∞ |

## üîß Git Hooks –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

### –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ hooks:
- **post-commit**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –≤ –∏—Å—Ö–æ–¥–Ω–æ–º –∫–æ–¥–µ

### –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã post-commit hook:
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –∏–∑–º–µ–Ω–∏–ª–∏—Å—å –ª–∏ —Ñ–∞–π–ª—ã Rust –∏–ª–∏ TypeScript –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–º –∫–æ–º–º–∏—Ç–µ
2. ü¶Ä –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ Rust: –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç –±–∏–Ω–∞—Ä–Ω–∏–∫–∏ ‚Üí –∫–æ–ø–∏—Ä—É–µ—Ç –≤ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ
3. üìù –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ TypeScript: –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç –∫–æ–¥ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
4. üì¶ –£–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã–π .vsix —Ñ–∞–π–ª
5. üßπ –£–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ –ø–∞–∫–µ—Ç–æ–≤

### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ hook:
```
ü¶Ä Rust source files changed - extension rebuild needed
üîÑ Starting automatic extension rebuild...
Building Rust binaries...
Copying binaries to extension...
Compiling TypeScript...
Packaging extension...
‚úÖ Extension successfully rebuilt: bsl-analyzer-1.3.1.vsix
üìã To install: Ctrl+Shift+P ‚Üí Extensions: Install from VSIX
```

## üõ†Ô∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

```
bsl_type_safety_analyzer/
‚îú‚îÄ‚îÄ package.json                    # npm —Å–∫—Ä–∏–ø—Ç—ã –∏ Husky –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îî‚îÄ‚îÄ rebuild-extension.js        # –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏
‚îú‚îÄ‚îÄ .husky/
‚îÇ   ‚îú‚îÄ‚îÄ pre-commit                  # Hook –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º (–ø—É—Å—Ç–æ–π)
‚îÇ   ‚îî‚îÄ‚îÄ post-commit                 # Hook –ø–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞ (–∞–≤—Ç–æ–ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞)
‚îú‚îÄ‚îÄ vscode-extension/
‚îÇ   ‚îú‚îÄ‚îÄ bin/                        # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ–º—ã–µ –±–∏–Ω–∞—Ä–Ω–∏–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ dist/                       # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–±–æ—Ä–∫–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
‚îÇ       ‚îî‚îÄ‚îÄ bsl-analyzer-1.3.1.vsix
‚îî‚îÄ‚îÄ target/release/                 # Rust –±–∏–Ω–∞—Ä–Ω–∏–∫–∏
    ‚îú‚îÄ‚îÄ lsp_server.exe
    ‚îú‚îÄ‚îÄ bsl-analyzer.exe
    ‚îî‚îÄ‚îÄ ...
```

## üéØ Workflow —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### 1. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ Rust –∫–æ–¥–∞:
```bash
# –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ src/
git add src/
git commit -m "feat: —É–ª—É—á—à–µ–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞"
# ‚Üí –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç—Å—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ
```

### 2. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è VS Code:
```bash
# –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ vscode-extension/src/
git add vscode-extension/
git commit -m "feat: –Ω–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞ –≤ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–∏"
# ‚Üí –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç—Å—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ
```

### 3. –ë—ã—Å—Ç—Ä–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ –∫–æ–º–º–∏—Ç–∞:
```bash
npm run rebuild:quick
# ‚Üí –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –±–µ–∑ —É–ø–∞–∫–æ–≤–∫–∏ .vsix (–±—ã—Å—Ç—Ä–µ–µ)
```

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: Hook –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
```bash
# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ Husky
npm run prepare
chmod +x .husky/post-commit
```

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤
```bash
# –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ñ–∞–π–ª–æ–≤
ls -la target/release/
ls -la vscode-extension/bin/
```

### –ü—Ä–æ–±–ª–µ–º–∞: TypeScript –Ω–µ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–∏
cd vscode-extension
npm install
npm run compile
```

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–ë–µ–∑ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏**: 5-7 –º–∏–Ω—É—Ç —Ä—É—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **–° –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–µ–π**: 0 –º–∏–Ω—É—Ç (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ —Ñ–æ–Ω–µ)
- **–ë—ã—Å—Ç—Ä–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞**: `npm run rebuild:quick` –∑–∞ 2-3 –º–∏–Ω—É—Ç—ã

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ CI/CD

–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –≤ GitHub Actions –¥–æ–±–∞–≤—å—Ç–µ:
```yaml
- name: Build and package extension
  run: npm run rebuild:extension
  
- name: Upload extension artifact
  uses: actions/upload-artifact@v3
  with:
    name: bsl-analyzer-extension
    path: vscode-extension/dist/bsl-analyzer-*.vsix
```